(function(){MPCE_VIDEO_ADDON.isEditor="1"==MPCE_VIDEO_ADDON.isEditor?!0:!1;if("undefined"===typeof window.mpcevaYTApiReady){var b=jQuery.Deferred();window.mpcevaYTApiReady=b.promise();var s=function(){var b=jQuery.Deferred(),f=document.querySelector('script[src*="//www.youtube.com/iframe_api"]');if(!f){f=document.createElement("script");f.src="//www.youtube.com/iframe_api";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(f,e)}jQuery(f).load(function(){b.resolve()});return b},
t=document.getElementsByClassName("mpceva-yt-player").length;if(MPCE_VIDEO_ADDON.isEditor||t){var e=function(){"resolved"!==b.state()&&b.resolve()};"undefined"===typeof YT||"undefined"===typeof YT.Player?("undefined"===typeof window.onYouTubeIframeAPIReady&&(window.onYouTubeIframeAPIReady=e),"undefined"===typeof window.onYouTubePlayerAPIReady&&(window.onYouTubePlayerAPIReady=e),s().done(function(){"undefined"!==typeof YT&&"undefined"!==typeof YT.ready&&YT.ready(e)})):e()}}})();
jQuery(document).ready(function(b){function s(a){return function(b){a.resolve()}}function t(a){return function(b){a.resolve()}}function e(a){a.each(function(a){var d=b(this),m=d.attr("data-mpce"),e=!0;if("1"===m){var g=!1;a=!1;var n=0,k=".slides div li",u="false"}else a=!0,u=d.attr("data-autoplay"),g=d.attr("data-slideshow"),"true"===g&&(n=d.attr("data-slideshow-speed")),"undefined"===typeof n&&(n=0),k=".slides li";var p=[],l=d.find("iframe.mpceva-yt-player").length;l&&"undefined"!==typeof window.mpcevaYTApiReady&&
p.push(window.mpcevaYTApiReady);var v=b.Deferred(),r=v.promise();p.push(r);b(this).flexslider({animation:"slide",selector:""+k+"",animationLoop:!0,smoothHeight:!1,pauseOnHover:!1,controlNav:!0,keyboard:a,directionNav:!0,nextText:" ",prevText:" ",slideshow:!1,slideshowSpeed:n,useCSS:!1,init:function(a){a.find(".clone").each(function(){var a=b(this).attr("id")+"_clone";b(this).find("iframe").attr("id",a)});"1"===c&&(c=b(".mpceva-slide").width()/100*56.25,a.css("maxHeight",c));if(l){var c=b(".mpceva-flexslider").attr("data-mpce");
"1"!==c&&(a=a.find("iframe.mpceva-yt-player"))&&a.each(function(){var a=this;if(!b(this).closest("li").hasClass("clone")){var c=b.Deferred(),d=c.promise();p.push(d);b.when(window.mpcevaYTApiReady).then(function(){h[a.id]=new YT.Player(a.id,{events:{onReady:s(c),onStateChange:"mpcevaOnYouTubePlayerStateChange",onError:t(c)}})})}})}},start:function(a){setTimeout(function(){var a=b(".mpceva-image-slide");if(a){var c=a.width()/100*56.25;a.find(".mpceva-image-view").css("height",c)}},1E3);"1"===m&&(a=
b(".slides div li").width(),b(".mpceva-slide.clone").css({width:a,"float":"left"}));v.resolve()},before:function(a){if("1"!==m){var c=a.slides.eq(a.currentSlide).find("video")[0];c&&(b(c).hasClass("mpce-video-paused")&&(e=!1),q(c,"html5"));0!==a.slides.eq(a.currentSlide).find('iframe[data-id="vimeo_player"]').length&&(c=a.slides.eq(a.currentSlide).find('iframe[data-id="vimeo_player"]')[0],b(c).hasClass("mpceva-vimeo-paused")&&(e=!1),q(c,"vimeo"));if(a=a.slides.eq(a.currentSlide).find("iframe.mpceva-yt-player")[0])2===
h[a.id].getPlayerState()&&(e=!1),q(a,"youtube")}},after:function(a){"1"!==m&&("true"===g&&!0!==a.playing&&a.flexslider("play"),"true"===u&&!0===e&&(a=a.slides.eq(a.currentSlide),b(a[0]).hasClass("mpceva-youtube-slide")?f(a,h):f(a,!1)))}});b.when.apply(b,p).then(function(){d.parent().removeClass("mpceva-video-slider-preload");"true"===g&&d.flexslider("play");if("true"===u){var a=b(d[0]).find(".flex-active-slide");b(a[0]).hasClass("mpceva-youtube-slide")?f(a,h):f(a,!1)}})})}function q(a,b){if("youtube"===
b){var d=a.id;h[d].seekTo(0);h[d].stopVideo()}"vimeo"===b&&a.contentWindow.postMessage('{"method":"unload"}',"https://player.vimeo.com");"html5"===b&&(a.paused||a.pause(),0!==a.currentTime&&(a.currentTime=0))}function f(a,c){if(b(a[0]).hasClass("mpceva-vimeo-slide")){a.find('iframe[data-id="vimeo_player"]')[0].contentWindow.postMessage('{"method":"play"}',"https://player.vimeo.com");var d=a.closest(".mpceva-flexslider"),e=d.attr("data-slideshow");"true"===e&&d.flexslider("pause")}else b(a[0]).hasClass("mpceva-youtube-slide")?
(d=b(a[0]).find("iframe")[0].id,c[d].playVideo()):b(a[0]).hasClass("mpceva-html5-slide")&&(d=a.closest(".mpceva-flexslider"),e=d.attr("data-slideshow"),"true"===e&&d.flexslider("pause"),a.find("video")[0].play())}(function(a){a.each(function(a){b(this).magnificPopup({disableOn:0,type:"iframe",removalDelay:160,preloader:!1,fixedContentPos:!1})})})(b("a.mpceva_popup[data-id='mpceva_popup']"));(function(a){a.each(function(){b(this).magnificPopup({type:"inline",midClick:!0,callbacks:{open:function(){jQuery(".mpceva-html5")[0].play()},
close:function(){jQuery(".mpceva-html5")[0].pause();jQuery(".mpceva-html5")[0].currentTime=0}}})})})(b("a.mpceva_popup[data-id='mpceva_html5_popup']"));b(".mpceva-video-lightbox").on("click","a.mpceva_popup",function(a){a.stopPropagation();a.preventDefault()});if(!b.flexslider.defaults.hasOwnProperty("init")){var r=b.fn.flexslider;b.fn.flexslider=function(){var a=r.apply(this,arguments);void 0===arguments[0]&&(arguments[0]={});arguments[0].hasOwnProperty("init")&&arguments[0].init(this);return a}}b("body").on("MPCEObjectCreated MPCEObjectUpdated",
function(a,b,d){"mpceva_video_slider"===d&&(a=b.find(".mpceva-flexslider"),e(a))});b("body").on("MPCEObjectRemove MPCEObjectCreated MPCEObjectResizeStop MPCEObjectResize MPCEObjectStyleChanged MPCEObjectDuplicated MPCEObjectDrop MPCEObjectSplit MPCEObjectSplitStop",function(){var a=b(".mpceva-flexslider");a&&a.each(function(){var a=b(this).find(".slides div li").width();b(this).find(".mpceva-slide.clone").css({width:a});a=b(this).find(".mpceva-slide").width()/100*56.25;0!==a&&b(this).css("maxHeight",
a);var d=b(this).find(".mpceva-image-slide");d&&d.find(".mpceva-image-view").css("height",a)})});var g=b(".mpceva-flexslider video");g.on("playing",function(a){b(b(this)[0]).removeClass("mpce-video-paused");a=b(this).closest(".mpceva-flexslider");"true"===a.attr("data-slideshow")&&a.flexslider("pause")});g.on("pause",function(a){b(b(this)[0]).addClass("mpce-video-paused");a=b(this).closest(".mpceva-flexslider");"true"===a.attr("data-slideshow")&&a.flexslider("play")});g.on("waiting",function(a){b(b(this)[0]).removeClass("mpce-video-paused");
a=b(this).closest(".mpceva-flexslider");"true"===a.attr("data-slideshow")&&a.flexslider("pause")});g.on("ended",function(a){b(b(this)[0]).removeClass("mpce-video-paused");b(this).currentTime=0;b(this).load()});g.children("source").each(function(){b(this).on("error",function(a){a=b(this).closest(".mpceva-flexslider");var c=a.attr("data-slideshow"),d=a.attr("data-autoplay");"true"===c&&a.flexslider("play");"true"===d&&b(this).closest("video")[0].pause()})});var l=function(a){var b=a.attr("src"),d=b.toString().match(/^(?:https?:\/\/|)(?:www\.|player\.|)vimeo.com\/(?:channels\/(?:\w+\/)?|groups\/(?:[^\/]*)\/videos\/|album\/(?:\d+)\/video\/|video\/|)(\d+)(?:\/|\?|\#\w*|)$/),
e="";null===d?(b=b.toString().match(/^\d+$/),e="array"===typeof b&&"undefined"!==typeof b[0]?b[0]:""):e="array"===typeof d&&"undefined"!==typeof d[1]?d[1]:"";return"https://player.vimeo.com/video/"+e+"?api=1&player_id="+a.attr("id")+"&badge=0&title=0&portrait=0&byline=0"},k=function(a,c,d){a={method:a};c&&(a.value=c);c=b("*[id="+d+"]");c.length&&(c.eq(-1).length&&c.eq(-1)[0].contentWindow.postMessage(JSON.stringify(a),l(c.eq(-1))),c[0].contentWindow.postMessage(JSON.stringify(a),l(c)))};window.addEventListener("message",
function(a){var c;a:{try{JSON.parse(a.data)}catch(d){c=!1;break a}c=!0}if(c){a=JSON.parse(a.data);c=b("#"+a.player_id).closest(".mpceva-flexslider").attr("data-slideshow");var e=b("#"+a.player_id).closest(".mpceva-flexslider").attr("data-autoplay");if("1"!==b("#"+a.player_id).closest(".mpceva-flexslider").attr("data-mpce"))switch(a.event){case "ready":k("addEventListener","play",a.player_id);k("addEventListener","pause",a.player_id);k("addEventListener","finish",a.player_id);"true"===e&&(a=b("#"+
a.player_id).closest(".mpceva-flexslider").find('.flex-active-slide iframe[data-id="vimeo_player"]')[0])&&a.contentWindow.postMessage('{"method":"play"}',"https://player.vimeo.com");break;case "play":b(b("#"+a.player_id)[0]).removeClass("mpceva-vimeo-paused");"true"===c&&b("#"+a.player_id).closest(".mpceva-flexslider").flexslider("pause");break;case "pause":b(b("#"+a.player_id)[0]).addClass("mpceva-vimeo-paused");"true"===c&&b("#"+a.player_id).closest(".mpceva-flexslider").flexslider("play");break;
case "finish":b(b("#"+a.player_id)[0]).removeClass("mpceva-vimeo-paused"),a=b("#"+a.player_id)[0],a.contentWindow.postMessage('{"method":"pause"}',"https://player.vimeo.com"),a.contentWindow.postMessage('{"method":"seekTo", "value": 0.00001}',"https://player.vimeo.com")}}},!1);var h={};window.mpcevaOnYouTubePlayerStateChange=function(a){var c=b(a.target.f),d=c.closest(".mpceva-flexslider"),c=c.closest(".mpceva-flexslider").attr("data-slideshow");switch(a.data){case 0:a.target.f.contentWindow.postMessage('{"event":"command","func":"stopVideo","args":""}',
"*");a.target.f.contentWindow.postMessage('{"event":"command","func":"seekTo","args":[0,true]}',"*");"true"===c&&d.flexslider("play");break;case 1:"true"===c&&d.flexslider("pause");break;case 2:"true"===c&&d.flexslider("play");break;case 3:"true"===c&&d.flexslider("pause");break;case 5:"true"===c&&d.flexslider("play")}};e(b(".mpceva-flexslider"))});
